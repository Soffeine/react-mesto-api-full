{"version":3,"sources":["images/add__button.svg","images/header-logo.svg","components/Header/Header.js","contexts/CurrentUserContext.js","components/Card/Card.js","components/Main/Main.js","components/Footer/Footer.js","components/AuthForm/AuthForm.js","components/Register/Register.js","components/Login/Login.js","components/ImagePopup/ImagePopup.js","components/PopupWithForm/PopupWithForm.js","components/EditProfilePopup/EditProfilePopup.js","components/AddPlacePopup/AddPlacePopup.js","components/EditAvatarPopup/EditAvatarPopup.js","utils/api.js","components/ProtectedRoute/ProtectedRoute.js","components/InfoTooltip/InfoTooltip.js","utils/auth.js","images/onRegisterError.svg","images/onRegisterSuccess.svg","components/App/App.js","reportWebVitals.js","index.js"],"names":["Header","email","linkName","link","onSignOut","className","src","logo","alt","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","name","likes","currentUser","useContext","isOwn","owner","_id","placeDeleteButtonClassName","isLiked","some","i","placeLikeButtonClassName","type","length","Main","onEditProfileClick","onAddPlaceClick","onAvatarClick","cards","userEmail","avatar","id","about","AddButton","map","Footer","AuthForm","password","title","buttonText","children","onChangeEmail","onChangePassword","onSubmit","placeholder","value","onChange","required","Register","onRegister","useState","setEmail","setPassword","e","target","preventDefault","Login","onLogin","ImagePopup","isOpened","popupName","onClose","toString","PopupWithForm","EditProfilePopup","isOpen","onUpdateUser","setName","description","setDescription","useEffect","minLength","maxLength","AddPlacePopup","onAddPlace","placeName","setPlaceName","setLink","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","api","config","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_getResponseData","data","body","JSON","stringify","item","authorization","ProtectedRoute","Component","component","props","loggedIn","InfoTooltip","image","text","BASE_URL","getResponseData","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddplacePopupOpen","isEditAvatarPopupOpen","setIsAvatarPopupOpen","isImagePopupOpen","selectedCard","imagePopupData","setImagePopupData","setCurrentUser","setCards","setLoggedIn","history","useHistory","isSuccess","setIsSuccess","successStatus","setSuccessStatus","registerErrorMessage","errorImage","registerSuccessMessage","successImage","handleSubmitMessage","closeAllPopups","prev","mestoAuth","jwt","auth","catch","err","console","log","localStorage","getItem","push","all","getUserInfo","getPlaceInfo","userRes","cardRes","Provider","exact","path","changeLikeStatus","newCard","state","c","deleteCard","filter","removeItem","setItem","token","editProfileInfo","addNewCard","editAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iNAAe,MAA0B,wCCA1B,MAA0B,wC,cCmB1BA,MAff,YAAsD,IAApCC,EAAmC,EAAnCA,MAAOC,EAA4B,EAA5BA,SAAUC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,UAErC,OACE,yBAAQC,UAAU,SAAlB,UACE,qBAAKC,IAAKC,EAAMF,UAAU,eAAeG,IAAI,8EAC7C,sBAAKH,UAAU,0BAAf,UACA,mBAAGA,UAAU,eAAb,SAA6BJ,IAC7B,cAAC,IAAD,CAAMQ,GAAIN,EAAME,UAAU,eAAeK,QAASN,EAAlD,SACGF,WCVES,EAAqBC,IAAMC,gBC8BzBC,MA7Bf,YAAgE,IAAhDC,EAA+C,EAA/CA,KAAMC,EAAyC,EAAzCA,YAAaC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,aAErCC,EAAsBJ,EAAtBI,KAAMhB,EAAgBY,EAAhBZ,KAAMiB,EAAUL,EAAVK,MACdC,EAAcC,qBAAWX,GAEzBY,EAAQR,EAAKS,MAAMC,MAAQJ,EAAYI,IACvCC,EAA0B,+BAA4BH,EAAQ,GAAK,+BAEnEI,EAAUZ,EAAKK,MAAMQ,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OACrDK,EAAwB,6BAA0BH,EAAU,4BAA8B,IAGhG,OAEE,sBAAKtB,UAAU,QAAf,UACE,qBAAKA,UAAU,eAAeC,IAAKH,EAAMK,IAAKW,EAAMT,QAAS,kBAAMM,EAAYD,MAC/E,wBAAQgB,KAAK,SAAS1B,UAAWqB,EAA4BhB,QAAS,kBAAMQ,EAAaH,MACzF,sBAAKV,UAAU,iBAAf,UACE,oBAAIA,UAAU,eAAd,SAA8Bc,IAC9B,sBAAKd,UAAU,+BAAf,UACE,wBAAQ0B,KAAK,SAAS1B,UAAWyB,EAA0BpB,QAAS,kBAAMO,EAAWF,MACrF,mBAAGV,UAAU,sBAAb,SAAoCe,EAAMY,mBCyBrCC,MA3Cf,YAAyI,IAA1HC,EAAyH,EAAzHA,mBAAoBC,EAAqG,EAArGA,gBAAiBC,EAAoF,EAApFA,cAAepB,EAAqE,EAArEA,YAAaqB,EAAwD,EAAxDA,MAAOpB,EAAiD,EAAjDA,WAAYC,EAAqC,EAArCA,aAAcoB,EAAuB,EAAvBA,UAAWlC,EAAY,EAAZA,UAClHiB,EAAcC,qBAAWX,GAE/B,OACI,iCACI,cAAC,EAAD,CAAQR,KAAK,WACbD,SAAS,iCACTD,MAAOqC,EACPlC,UAAWA,IACX,0BAASC,UAAU,UAAnB,UACI,sBAAKA,UAAU,iBAAf,UACI,qBAAKC,IAAKe,EAAYkB,OAAQlC,UAAU,iBAAiBmC,GAAG,aACxDhC,IAAI,wEACR,wBAAQuB,KAAK,SAAS1B,UAAU,qBAAqBK,QAAS0B,OAGlE,sBAAK/B,UAAU,gBAAf,UACI,oBAAIA,UAAU,gBAAgBmC,GAAG,OAAjC,SAAyCnB,EAAYF,OACrD,wBAAQY,KAAK,SAAS1B,UAAU,uBAAuBK,QAASwB,IAChE,mBAAG7B,UAAU,uBAAuBmC,GAAG,cAAvC,SAAsDnB,EAAYoB,WAEtE,wBAAQV,KAAK,SAAS1B,UAAU,sBAAsBK,QAASyB,EAA/D,SACI,qBAAK7B,IAAKoC,EAAWlC,IAAI,mFAIjC,yBAASH,UAAU,SAAnB,SACKgC,EAAMM,KAAI,SAAA5B,GACP,OAAQ,cAAC,EAAD,CACRA,KAAOA,EACPC,YAAcA,EACdqB,MAAOA,EACPpB,WAAaA,EACbC,aAAeA,GALIH,EAAKU,cCxB7BmB,MARf,WACI,OACI,wBAAQvC,UAAU,SAAlB,SACI,mBAAGA,UAAU,oBAAb,uCCaGwC,MAhBf,YAAgH,IAA5F5C,EAA2F,EAA3FA,MAAO6C,EAAoF,EAApFA,SAAUC,EAA0E,EAA1EA,MAAOC,EAAmE,EAAnEA,WAAYC,EAAuD,EAAvDA,SAAUC,EAA6C,EAA7CA,cAAeC,EAA8B,EAA9BA,iBAAkBC,EAAY,EAAZA,SAC/F,OACI,uBAAM/C,UAAU,YAAY+C,SAAUA,EAAtC,UACI,sBAAK/C,UAAU,uBAAf,UACA,oBAAIA,UAAU,mBAAd,SAAkC0C,IAClC,uBAAO1C,UAAU,mBAAmB0B,KAAK,QAAQsB,YAAY,QAAQb,GAAG,QAAQrB,KAAK,QAAQmC,MAAOrD,GAAS,GAAIsD,SAAUL,EAAeM,UAAQ,IAClJ,sBAAMnD,UAAU,oBAChB,uBAAOA,UAAU,mBAAmB0B,KAAK,WAAWsB,YAAY,uCAASb,GAAG,WAAWrB,KAAK,WAAWmC,MAAOR,GAAY,GAAIS,SAAUJ,EAAkBK,UAAQ,IAClK,sBAAMnD,UAAU,oBAChB,wBAAQA,UAAU,oBAAoB0B,KAAK,SAA3C,SAAqDiB,OAEnDC,MC2BCQ,MAnCf,YAAmC,IAAfC,EAAc,EAAdA,WAChB,EAA0BC,mBAAS,IAAnC,mBAAO1D,EAAP,KAAc2D,EAAd,KACA,EAAgCD,mBAAS,IAAzC,mBAAOb,EAAP,KAAiBe,EAAjB,KAeA,OACI,qCACI,cAAC,EAAD,CAAQ1D,KAAK,WACbD,SAAS,iCACTD,MAAM,KACN,cAAC,EAAD,CAAUA,MAAQA,EAClB6C,SAAWA,EACXC,MAAM,qEACNC,WAAW,+GACXE,cAtBR,SAA4BY,GAC1BF,EAASE,EAAEC,OAAOT,QAsBZH,iBAnBR,SAA+BW,GAC7BD,EAAYC,EAAEC,OAAOT,QAmBfF,SAhBR,SAAsBU,GAClBA,EAAEE,iBACFN,EAAWZ,EAAU7C,IAQjB,SAOI,oBAAGI,UAAU,oBAAb,kIAAuD,cAAC,IAAD,CAAMI,GAAG,WAAWJ,UAAU,yBAA9B,qDCIxD4D,MAlCf,YAA6B,IAAZC,EAAW,EAAXA,QACf,EAA0BP,mBAAS,IAAnC,mBAAO1D,EAAP,KAAc2D,EAAd,KACA,EAAgCD,mBAAS,IAAzC,mBAAOb,EAAP,KAAiBe,EAAjB,KAgBA,OACE,qCACE,cAAC,EAAD,CAAQ1D,KAAK,WACXD,SAAS,qEACTD,MAAM,KACR,cAAC,EAAD,CAAU6C,SAAUA,EAClB7C,MAAOA,EACP8C,MAAM,2BACNC,WAAW,iCACXE,cAvBN,SAA2BY,GACzBF,EAASE,EAAEC,OAAOT,QAuBdH,iBApBN,SAA8BW,GAC5BD,EAAYC,EAAEC,OAAOT,QAoBjBF,SAhBN,SAAsBU,GACpBA,EAAEE,iBACFE,EAAQpB,EAAU7C,UCFPkE,MAff,YAA2D,IAAtCpD,EAAqC,EAArCA,KAAMqD,EAA+B,EAA/BA,SAAUC,EAAqB,EAArBA,UAAWC,EAAU,EAAVA,QAErCnE,EAAcY,EAAdZ,KAAMgB,EAAQJ,EAARI,KAEb,OACI,qBAAKd,UAAW+D,EAAQ,mCAA+BC,GAA/B,sBAA4DA,GAApF,SACI,sBAAKhE,UAAU,yBAAf,UACI,wBAAQ0B,KAAK,SAAS1B,UAAU,gDAAgDK,QAAS4D,IACzF,qBAAKjE,UAAU,uBAAuBC,IAAKH,EAAKoE,WAAY/D,IAAI,4DAChE,mBAAGH,UAAU,uBAAb,SAAqCc,UCMtCqD,MAff,YAA2F,IAAlErD,EAAiE,EAAjEA,KAAM4B,EAA2D,EAA3DA,MAAOE,EAAoD,EAApDA,SAAUD,EAA0C,EAA1CA,WAAYoB,EAA8B,EAA9BA,SAAUE,EAAoB,EAApBA,QAASlB,EAAW,EAAXA,SAC3E,OACI,qBAAK/C,UAAW+D,EAAQ,mCAA+BjD,GAA/B,sBAAuDA,GAA/E,SACI,sBAAKd,UAAU,mBAAf,UACI,wBAAQ0B,KAAK,SAAS1B,UAAU,+CAA+CK,QAAS4D,IACxF,uBAAMjE,UAAU,aAAac,KAAMA,EAAMqB,GAAE,gBAAWrB,EAAX,SAAwBiC,SAAUA,EAA7E,UACE,oBAAI/C,UAAU,sBAAd,SAAqC0C,IAClCE,EACH,wBAAQlB,KAAK,SAAS1B,UAAU,oCAAoCc,KAAK,YAAzE,SAAsF6B,aC0CzFyB,MA/Cf,YAA8D,IAAlCC,EAAiC,EAAjCA,OAAQJ,EAAyB,EAAzBA,QAASK,EAAgB,EAAhBA,aAErCtD,EAAcC,qBAAWX,GAE/B,EAAwBgD,mBAAS,IAAjC,mBAAOxC,EAAP,KAAayD,EAAb,KACA,EAAsCjB,mBAAS,IAA/C,mBAAOkB,EAAP,KAAoBC,EAApB,KA8BA,OA5BAC,qBAAU,WACRH,EAAQvD,EAAYF,MACpB2D,EAAezD,EAAYoB,SAC1B,CAACpB,EAAaqD,IAIjBK,qBAAU,WACRH,EAAQ,IACRE,EAAe,MACd,IAmBD,eAAC,EAAD,CAAe3D,KAAK,OAAO4B,MAAO,4HAAyBC,WAAY,yDAAaoB,SAAUM,EAAQJ,QAASA,EAASlB,SAjB1H,SAAsBU,GACpBA,EAAEE,iBACFW,EAAa,CACXxD,OACAsB,MAAOoC,KAaT,UACE,uBAAO9C,KAAK,OAAOuB,MAAOnC,EAAMoC,SAVpC,SAA0BO,GACxBc,EAAQd,EAAEC,OAAOT,QAS+CjD,UAAU,6DACtEgD,YAAY,qBAAMlC,KAAK,OAAO6D,UAAU,IAAIC,UAAU,KAAKzB,UAAQ,IACrE,sBAAMnD,UAAU,yBAChB,uBAAO0B,KAAK,OAAOuB,MAAOuB,EAAatB,SAT3C,SAAiCO,GAC/BgB,EAAehB,EAAEC,OAAOT,QAQsDjD,UAAU,oEACpFgD,YAAY,sGAAsBlC,KAAK,QAAQ6D,UAAU,IAAIC,UAAU,MAAMzB,UAAQ,IACvF,sBAAMnD,UAAU,6BCVP6E,MAlCf,YAA0D,IAAhCR,EAA+B,EAA/BA,OAAQJ,EAAuB,EAAvBA,QAASa,EAAc,EAAdA,WAEzC,EAAkCxB,mBAAS,IAA3C,mBAAOyB,EAAP,KAAkBC,EAAlB,KACA,EAAwB1B,mBAAS,IAAjC,mBAAOxD,EAAP,KAAamF,EAAb,KAmBE,OACI,eAAC,EAAD,CAAenE,KAAK,MAAM4B,MAAO,gEAAeC,WAAY,6CAAWoB,SAAUM,EAAQJ,QAASA,EAASlB,SAlBjH,SAAsBU,GACpBA,EAAEE,iBACFmB,EAAW,CACThE,KAAMiE,EACNjF,SAEFkF,EAAa,IACbC,EAAQ,KAWJ,UACA,uBAAOvD,KAAK,OAAOwB,SATzB,SAAuBO,GACrBuB,EAAavB,EAAEC,OAAOT,QAQ0BjD,UAAU,mEACpDgD,YAAY,mDAAWC,MAAO8B,GAAa,GAAIjE,KAAK,OAAO6D,UAAU,IAAIC,UAAU,KAAKzB,UAAQ,IAClG,sBAAMnD,UAAU,yBAChB,uBAAOkD,SARb,SAAuBO,GACrBwB,EAAQxB,EAAEC,OAAOT,QAOmBA,MAAOnD,GAAQ,GAAIE,UAAU,mEAC3DgD,YAAY,qGAAqBlC,KAAK,OAAOY,KAAK,MAAMyB,UAAQ,IAClE,sBAAMnD,UAAU,6BCVTkF,MAnBf,YAA+D,IAApCb,EAAmC,EAAnCA,OAAQJ,EAA2B,EAA3BA,QAASkB,EAAkB,EAAlBA,eACpCC,EAAYC,iBAAO,MASzB,OACE,eAAC,EAAD,CAAevE,KAAK,SAAS4B,MAAO,wFAAmBC,WAAY,yDAAaoB,SAAUM,EAAQJ,QAASA,EAASlB,SARtH,SAAsBU,GACpBA,EAAEE,iBACFwB,EAAe,CACbjD,OAAQkD,EAAUE,QAAQrC,SAK5B,UACE,uBAAOsC,IAAKH,EAAWpF,UAAU,oEAC/BgD,YAAY,6EAAiBlC,KAAK,SAASY,KAAK,MAAMyB,UAAQ,IAChE,sBAAMnD,UAAU,6B,gBCsFLwF,EARL,IA/FZ,WACI,WAAYC,GAAS,oBACjBC,KAAKC,KAAOF,EAAOG,IACnBF,KAAKG,SAAWJ,EAAOK,QAH/B,oDAOI,SAAiBC,GACb,OAAIA,EAAIC,GACGD,EAAIE,OAEJC,QAAQC,OAAR,sGAAmCJ,EAAIK,WAX1D,yBAiBI,WACI,OAAOC,MAAM,GAAD,OAAIX,KAAKC,KAAT,aAA0B,CAClCW,OAAQ,MACRR,QAASJ,KAAKG,WAEbU,KAAKb,KAAKc,oBAtBvB,0BA2BI,WACI,OAAOH,MAAM,GAAD,OAAIX,KAAKC,KAAT,UAAuB,CAC/BW,OAAQ,MACRR,QAASJ,KAAKG,WAEbU,KAAKb,KAAKc,oBAhCvB,6BAqCI,SAAgBC,GACZ,OAAOJ,MAAM,GAAD,OAAIX,KAAKC,KAAT,aAA0B,CAClCW,OAAQ,QACRR,QAASJ,KAAKG,SACda,KAAMC,KAAKC,UAAU,CACjB9F,KAAM2F,EAAK3F,KACXsB,MAAOqE,EAAKrE,UAGfmE,KAAKb,KAAKc,oBA9CvB,wBAmDI,SAAWC,GACP,OAAOJ,MAAM,GAAD,OAAIX,KAAKC,KAAT,oBAAiC,CACzCW,OAAQ,QACRR,QAASJ,KAAKG,SACda,KAAMC,KAAKC,UAAU,CACjB1E,OAAQuE,EAAKvE,WAGhBqE,KAAKb,KAAKc,oBA3DvB,wBA+DI,SAAWK,GACP,OAAOR,MAAM,GAAD,OAAIX,KAAKC,KAAT,UAAuB,CAC/BW,OAAQ,OACRR,QAASJ,KAAKG,SACda,KAAMC,KAAKC,UAAU,CACjB9F,KAAM+F,EAAK/F,KACXhB,KAAM+G,EAAK/G,SAGdyG,KAAKb,KAAKc,oBAxEvB,wBA4EI,SAAWpF,GACP,OAAOiF,MAAM,GAAD,OAAIX,KAAKC,KAAT,kBAAuBvE,GAAO,CACtCkF,OAAQ,SACRR,QAASJ,KAAKG,WAEbU,KAAKb,KAAKc,oBAjFvB,8BAqFI,SAAiBpF,EAAKE,GAClB,OAAO+E,MAAM,GAAD,OAAIX,KAAKC,KAAT,wBAA6BvE,GAAO,CAC5CkF,OAAQhF,EAAU,MAAQ,SAC1BwE,QAASJ,KAAKG,WAEbU,KAAKb,KAAKc,sBA1FvB,KA+FY,CAAQ,CAChBZ,IAAK,gDACLE,QAAS,CACPgB,cAAe,uCACf,eAAgB,sB,+BCtFPC,EAVQ,SAAC,GAAwC,IAA3BC,EAA0B,EAArCC,UAAyBC,EAAY,iBAC3D,OACI,cAAC,IAAD,UACK,kBACGA,EAAMC,SAAW,cAACH,EAAD,eAAeE,IAAY,cAAC,IAAD,CAAU9G,GAAG,kBCK1DgH,MAZf,YAAgD,IAAzBX,EAAwB,EAAxBA,KAAMpC,EAAkB,EAAlBA,OAAQJ,EAAU,EAAVA,QACjC,OACA,qBAAKjE,UAAWqE,EAAM,8BAAtB,SACI,sBAAKrE,UAAU,mBAAf,UACI,wBAAQ0B,KAAK,SAAS1B,UAAU,+CAA+CK,QAAS4D,IACxF,qBAAKjE,UAAU,eAAeC,IAAKwG,EAAKY,MAAOlH,IAAI,8HACnD,mBAAGH,UAAU,cAAb,SAA4ByG,EAAKa,aCNhCC,EAAW,gDAElBC,EAAkB,SAACzB,GACrB,OAAOA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAOJ,EAAIK,SCHrC,MAA0B,4CCA1B,MAA0B,8CC+P1BqB,MA5Of,WAEE,MAA4DnE,oBAAS,GAArE,mBAAOoE,EAAP,KAA+BC,EAA/B,KACA,EAAsDrE,oBAAS,GAA/D,mBAAOsE,EAAP,KAA4BC,EAA5B,KACA,EAAsDvE,oBAAS,GAA/D,mBAAOwE,EAAP,KAA8BC,EAA9B,KACA,EAA4CzE,mBAAS,CAAE0E,kBAAkB,EAAOC,aAAc,KAA9F,mBAAOC,EAAP,KAAuBC,EAAvB,KACA,EAAsC7E,mBAAS,IAA/C,mBAAOtC,EAAP,KAAoBoH,EAApB,KACA,EAA0B9E,mBAAS,IAAnC,mBAAOtB,EAAP,KAAcqG,EAAd,KACA,EAAgC/E,oBAAS,GAAzC,mBAAO6D,EAAP,KAAiBmB,EAAjB,KACMC,EAAUC,cAChB,EAAkClF,oBAAS,GAA3C,mBAAOmF,EAAP,KAAkBC,GAAlB,KACA,GAA0CpF,mBAAS,IAAnD,qBAAOqF,GAAP,MAAsBC,GAAtB,MACA,GAA0BtF,mBAAS,IAAnC,qBAAO1D,GAAP,MAAc2D,GAAd,MACMsF,GAAuB,CAC3BxB,MAAOyB,EACPxB,KAAM,uMAEFyB,GAAyB,CAC7B1B,MAAO2B,EACP1B,KAAM,yKAiBR,SAAS2B,GAAoBxC,GAC3BiC,IAAa,GACbE,GAAiBnC,GAsBnB,SAASyC,KACPvB,GAA0B,GAC1BI,GAAqB,GACrBF,GAAuB,GACvBM,GAAkB,SAACgB,GACjB,OAAO,2BACFA,GADL,IAEEnB,kBAAkB,OAGtBU,IAAa,GAIf,IAIMU,GAAY,SAACC,GACjB,OH7DsB,SAACA,GACvB,OAAOhD,MAAM,GAAD,OAAIkB,EAAJ,aAAyB,CACjCjB,OAAQ,MACRR,QAAS,CACL,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BuD,MAG9B9C,KAAKiB,GACLjB,MAAK,SAAAE,GAAI,OAAIA,KGoDX6C,CAAgBD,GACtB9C,MAAK,YAAa,IAAXE,EAAU,EAAVA,KACJ6B,GAAY,GACZ/E,GAASkD,EAAK7G,UAEjB2J,OAAM,SAACC,GAASC,QAAQC,IAAIF,OAiG/B,OA9FA9E,qBAAU,WACR,IAAM2E,EAAMM,aAAaC,QAAQ,OAE9BP,GACDD,GAAUC,KAEX,CAAClC,IAEJzC,qBAAU,WACJyC,GAAUoB,EAAQsB,KAAK,OAC1B,CAAC1C,EAAUoB,IAGd7D,qBAAU,WACRwB,QAAQ4D,IAAI,CAACtE,EAAIuE,cAAevE,EAAIwE,iBACjCzD,MAAK,YAAyB,IAAD,mBAAtB0D,EAAsB,KAAbC,EAAa,KAC1B9B,EAAe6B,GACf5B,EAAS6B,MAEZX,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAR,+EAA6BF,SAC5C,IA2ED,cAAClJ,EAAmB6J,SAApB,CAA6BlH,MAAOjC,EAApC,SACE,sBAAKhB,UAAU,OAAf,UACE,eAAC,IAAD,WAEE,cAAC,EAAD,CAAgBoK,OAAK,EAACC,KAAK,IACzBlD,SAAUA,EACVF,UAAWrF,EACXC,mBAlHqB,WAAQ8F,GAA0B,IAmHvD7F,gBAlHkB,WAAQ+F,GAAuB,IAmHjD9F,cArHoB,WAAQgG,GAAqB,IAsHjDpH,YAzDV,SAAyBD,GACvByH,GAAkB,SAACgB,GACjB,OAAO,2BACFA,GADL,IAEEnB,kBAAkB,EAClBC,aAAcvH,QAqDVsB,MAAOA,EACPpB,WAlFV,SAAwBF,GACtB,IAAMY,EAAUZ,EAAKK,MAAMQ,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAC3DoE,EAAI8E,iBAAiB5J,EAAKU,KAAME,GAC7BiF,MAAK,SAACgE,GACLlC,GAAS,SAACmC,GAAD,OAAWA,EAAMlI,KAAI,SAACmI,GAAD,OAAOA,EAAErJ,MAAQV,EAAKU,IAAMmJ,EAAUE,WAErElB,OAAM,SAACC,GACNC,QAAQC,IAAIF,OA4ER3I,aAvEV,SAA0BH,GACxB8E,EAAIkF,WAAWhK,EAAKU,KACjBmF,MAAK,WACJ8B,GAAS,kBAAMrG,EAAM2I,QAAO,SAACF,GAAD,OAAOA,EAAErJ,MAAQV,EAAKU,aAEnDmI,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAkERvH,UAAWrC,GACXG,UA/IV,WACEuI,GAAY,GACZqB,aAAaiB,WAAW,UA+IlB,cAAC,IAAD,CAAOP,KAAK,WAAZ,SACE,cAAC,EAAD,CAAUhH,WAjLpB,SAAoBZ,EAAU7C,IHpCR,SAAC6C,EAAU7C,GAC/B,OAAOyG,MAAM,GAAD,OAAIkB,EAAJ,WAAuB,CAC/BjB,OAAQ,OACRR,QAAS,CACL,eAAgB,oBAEpBY,KAAMC,KAAKC,UAAU,CAAEnE,WAAU7C,YAEhC2G,KAAKiB,GACLjB,MAAK,YAAa,IAAXE,EAAU,EAAVA,KACJgD,QAAQC,IAAIjD,GACZkD,aAAakB,QAAQ,QAASpE,EAAK7G,WG0B3C0J,CAAc7G,EAAU7C,GACrB2G,MAAK,WACF0C,GAAoBF,IACpBR,EAAQsB,KAAK,eAEhBN,OAAM,SAACC,GACNP,GAAoBJ,IACpBY,QAAQC,IAAIF,WA4KV,cAAC,IAAD,CAAOa,KAAK,WAAZ,SACE,cAAC,EAAD,CAAOxG,QAlKjB,SAAiBpB,EAAU7C,GACzB,OHxCqB,SAAC6C,EAAU7C,GAChC,OAAOyG,MAAM,GAAD,OAAIkB,EAAJ,WAAuB,CAC/BjB,OAAQ,OACRR,QAAS,CACL,eAAgB,oBAEpBY,KAAMC,KAAKC,UAAU,CAAEnE,WAAU7C,YAEhC2G,KAAKiB,GACLjB,MAAK,SAACE,GACHkD,aAAakB,QAAQ,MAAOpE,EAAKqE,UG8BlCxB,CAAe7G,EAAU7C,GAC7B2G,MAAK,WACF+B,GAAY,GACZC,EAAQsB,KAAK,QAEhBN,OAAM,WACLN,GAAoBJ,eAgKpB,cAAC,EAAD,IAEA,cAAC,EAAD,CAAkBxE,OAAQqD,EACxBzD,QAASiF,GACT5E,aAvDR,SAA0BmC,GACxBjB,EAAIuF,gBAAgBtE,GACjBF,MAAK,SAACR,GACLqC,EAAerC,GACfmD,QAEDK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAkDZ,cAAC,EAAD,CAAenF,OAAQuD,EACrB3D,QAASiF,GACTpE,WAvER,SAA8ByF,GAC5B/E,EAAIwF,WAAWT,GACZhE,MAAK,SAACgE,GACLlC,EAAS,CAACkC,GAAF,mBAAcvI,KACtBkH,QAEDK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAkEZ,cAAC,EAAD,CAAiBnF,OAAQyD,EACvB7D,QAASiF,GACT/D,eAnDR,SAA4BsB,GAC1BjB,EAAIyF,WAAWxE,GACZF,MAAK,SAACR,GACLqC,EAAerC,GACfmD,QAEDK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SA8CZ,cAAC,EAAD,CAAY9I,KAAMwH,EAAeD,aAC/BlE,SAAUmE,EAAeF,iBACzBhE,UAAW,QACXC,QAASiF,KAEX,cAAC,EAAD,CAAazC,KAAMkC,GACjBtE,OAAQoE,EACRxE,QAASiF,WC7OJgC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB7E,MAAK,YAAkD,IAA/C8E,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACA,cAAC,EAAD,QAGFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.507b423d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/add__button.eef2e85c.svg\";","export default __webpack_public_path__ + \"static/media/header-logo.b430ba41.svg\";","import React from 'react';\nimport logo from '../../images/header-logo.svg';\nimport { Link } from 'react-router-dom';\n\nfunction Header({ email, linkName, link, onSignOut}) {\n  \n    return(\n      <header className=\"header\">\n        <img src={logo} className=\"header__logo\" alt=\"Логотип Место\" />\n        <div className='header__links-container'>\n        <p className=\"header__link\">{email}</p>\n        <Link to={link} className=\"header__link\" onClick={onSignOut}>\n          {linkName}\n        </Link>\n        </div>\n      </header>\n    )\n}\n\nexport default Header","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport { useContext } from 'react';\n\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\n\n  const { name, link, likes } = card;\n  const currentUser = useContext(CurrentUserContext)\n\n  const isOwn = card.owner._id === currentUser._id;\n  const placeDeleteButtonClassName = (`place__delete-button ${isOwn ? '' : 'place__delete-button_hidden'}`);\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const placeLikeButtonClassName = (`place__like-button ${isLiked ? 'place__like-button_active' : ''}`);\n\n\n  return (\n\n    <div className=\"place\">\n      <img className=\"place__image\" src={link} alt={name} onClick={() => onCardClick(card)} />\n      <button type=\"button\" className={placeDeleteButtonClassName} onClick={() => onCardDelete(card)}></button>\n      <div className=\"place__caption\">\n        <h2 className=\"place__title\">{name}</h2>\n        <div className=\"place__like-status-container\">\n          <button type=\"button\" className={placeLikeButtonClassName} onClick={() => onCardLike(card)}></button>\n          <p className=\"place__like-counter\">{likes.length}</p>\n        </div>\n      </div>\n    </div>\n\n  )\n}\n\nexport default Card","import AddButton from '../../images/add__button.svg';\nimport Header from '../Header/Header';\nimport Card from '../Card/Card.js';\nimport { useContext } from 'react';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\nfunction Main({onEditProfileClick, onAddPlaceClick, onAvatarClick, onCardClick, cards, onCardLike, onCardDelete, userEmail, onSignOut}) {\n    const currentUser = useContext(CurrentUserContext);\n\n    return (\n        <main>\n            <Header link='/sign-in'\n            linkName='Выйти'\n            email={userEmail}\n            onSignOut={onSignOut} />\n            <section className=\"profile\">\n                <div className=\"profile__image\">\n                    <img src={currentUser.avatar} className=\"profile__photo\" id=\"userAvatar\"\n                        alt=\"Фото профиля\" />\n                    <button type=\"button\" className=\"profile__edit-sign\" onClick={onAvatarClick}>\n                    </button>\n                </div>\n                <div className=\"profile__info\">\n                    <h1 className=\"profile__name\" id=\"name\">{currentUser.name}</h1>\n                    <button type=\"button\" className=\"profile__edit-button\" onClick={onEditProfileClick}></button>\n                    <p className=\"profile__description\" id=\"description\">{currentUser.about}</p>\n                </div>\n                <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlaceClick} >\n                    <img src={AddButton} alt=\"Добавить фото\" />\n                </button>\n            </section>\n\n            <section className=\"places\">\n                {cards.map(card => {\n                    return (<Card key={card._id} \n                    card={ card } \n                    onCardClick={ onCardClick }\n                    cards={cards} \n                    onCardLike={ onCardLike } \n                    onCardDelete={ onCardDelete }/>)\n                })\n                }\n            </section>\n\n        </main>\n\n    )\n}\n\nexport default Main","import React from 'react';\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\n        </footer>\n    )\n}\n\nexport default Footer","import React from 'react'\n\nfunction AuthForm({ email, password, title, buttonText, children, onChangeEmail, onChangePassword, onSubmit }) {\n    return (\n        <form className=\"auth-form\" onSubmit={onSubmit}>\n            <div className=\"auth-form__container\">\n            <h2 className=\"auth-form__title\">{title}</h2>\n            <input className=\"auth-form__input\" type=\"email\" placeholder=\"Email\" id=\"email\" name=\"email\" value={email || ''} onChange={onChangeEmail} required />\n            <span className=\"auth-form__span\"></span>\n            <input className=\"auth-form__input\" type=\"password\" placeholder=\"Пароль\" id=\"password\" name=\"password\" value={password || ''} onChange={onChangePassword} required />\n            <span className=\"auth-form__span\"></span>\n            <button className=\"auth-form__submit\" type=\"submit\">{buttonText}</button>\n            </div>\n            { children }\n        </form >\n  )\n}\n\nexport default AuthForm;","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Header from \"../Header/Header\";\nimport AuthForm from \"../AuthForm/AuthForm\";\n\nfunction Register({ onRegister }) {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n\n    function handleChangeEmail (e) {\n      setEmail(e.target.value)\n    }\n    \n    function handleChangePassword (e) {\n      setPassword(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onRegister(password, email);\n    }\n\n    return (\n        <>\n            <Header link='/sign-in'\n            linkName='Войти'\n            email=''/>\n            <AuthForm email={ email }\n            password={ password }\n            title=\"Регистрация\"\n            buttonText=\"Зарегестрироваться\"\n            onChangeEmail={ handleChangeEmail }\n            onChangePassword={ handleChangePassword }\n            onSubmit={ handleSubmit }>\n                <p className=\"auth-form__signin\">Уже зарегестрированы? <Link to=\"/sign-in\" className=\"auth-form__signin_link\">Войти</Link></p>\n            </AuthForm>\n        </>\n    )\n}\n\nexport default Register;","import React, { useState } from \"react\";\nimport Header from \"../Header/Header\";\nimport AuthForm from \"../AuthForm/AuthForm\";\n\nfunction Login({ onLogin }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value)\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value)\n  }\n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onLogin(password, email)\n  }\n\n  return (\n    <>\n      <Header link='/sign-up'\n        linkName='Регистрация'\n        email='' />\n      <AuthForm password={password}\n        email={email}\n        title=\"Вход\"\n        buttonText=\"Войти\"\n        onChangeEmail={handleChangeEmail}\n        onChangePassword={handleChangePassword}\n        onSubmit={handleSubmit} />\n    </>\n  )\n}\n\nexport default Login;","import React from 'react';\n\nfunction ImagePopup({card, isOpened, popupName, onClose}) {\n\n    const {link, name} = card;\n \n    return (\n        <div className={isOpened ? `popup popup_opened popup-${popupName}` : `popup popup-${popupName}`}>\n            <div className=\"popup-image__container\">\n                <button type=\"button\" className=\"popup__close-button popup-image__close-button\" onClick={onClose}></button>\n                <img className=\"popup-image__picture\" src={link.toString()} alt=\"фото места\" />\n                <p className=\"popup-image__caption\">{name}</p>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup;","import React from 'react';\n\nfunction PopupWithForm( {name, title, children, buttonText, isOpened, onClose, onSubmit}) {\n    return (\n        <div className={isOpened ? `popup popup_opened popup-${name}` : `popup popup-${name}`}>\n            <div className=\"popup__container\">\n                <button type=\"button\" className=\"popup__close-button popup-edit__close-button\" onClick={onClose}></button>\n                <form className=\"popup-form\" name={name} id={`popup-${name}-form`} onSubmit={onSubmit}>\n                  <h2 className=\"popup-form__heading\">{title}</h2>\n                    {children}\n                  <button type=\"submit\" className=\"popup__button popup__button_valid\" name=\"addSubmit\">{buttonText}</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default PopupWithForm;","import React, { useContext, useState, useEffect } from 'react';\nimport PopupWithForm from '../PopupWithForm/PopupWithForm';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n\n  const currentUser = useContext(CurrentUserContext);\n\n  const [name, setName] = useState('');\n  const [description, setDescription] = useState('');\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen]);\n\n\n  //без этого эффекта вылезает ошибка\n  useEffect(() => {\n    setName('');\n    setDescription('');\n  }, [])\n\n  function handleSubmit(e) {\n    e.preventDefault();  \n    onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  function handleNameChange(e) {\n    setName(e.target.value)\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value)\n  }\n\n  return (\n    <PopupWithForm name=\"edit\" title={\"Редактировать профиль\"} buttonText={\"Сохранить\"} isOpened={isOpen} onClose={onClose} onSubmit={ handleSubmit }>\n      <input type=\"text\" value={name} onChange={ handleNameChange } className=\"popup-form__information popup-form__information_input_name\"\n        placeholder=\"Имя\" name=\"name\" minLength=\"2\" maxLength=\"20\" required />\n      <span className=\"popup__error-message\"></span>\n      <input type=\"text\" value={description} onChange={ handleDescriptionChange } className=\"popup-form__information popup-form__information_input_description\"\n        placeholder=\"Чем вы занимаетесь?\" name=\"about\" minLength=\"2\" maxLength=\"200\" required />\n      <span className=\"popup__error-message\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;","import React, { useState } from 'react';\nimport PopupWithForm from '../PopupWithForm/PopupWithForm';\n\nfunction AddPlacePopup ({ isOpen, onClose, onAddPlace }) {\n\n  const [placeName, setPlaceName] = useState('');\n  const [link, setLink] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();  \n    onAddPlace({\n      name: placeName,\n      link,\n    });\n    setPlaceName('');\n    setLink('');\n  }\n\n  function handleAddName(e) {\n    setPlaceName(e.target.value)\n  }\n\n  function handleAddLink(e) {\n    setLink(e.target.value)\n  }\n    return (\n        <PopupWithForm name=\"add\" title={\"Новое место\"} buttonText={\"Создать\"} isOpened={isOpen} onClose={onClose} onSubmit={handleSubmit}>\n        <input type=\"text\" onChange={handleAddName} className=\"popup-form__information popup-form__information_input_place-name\"\n          placeholder=\"Название\" value={placeName || ''} name=\"name\" minLength=\"2\" maxLength=\"30\" required />\n        <span className=\"popup__error-message\"></span>\n        <input onChange={handleAddLink} value={link || ''} className=\"popup-form__information popup-form__information_input_link-image\"\n          placeholder=\"Ссылка на картинку\" name=\"link\" type=\"url\" required />\n        <span className=\"popup__error-message\"></span>\n        </PopupWithForm>\n    )\n};\n\nexport default AddPlacePopup;","import React, { useRef } from 'react';\nimport PopupWithForm from '../PopupWithForm/PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avatarRef = useRef(null);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"avatar\" title={\"Обновить аватар\"} buttonText={\"Сохранить\"} isOpened={isOpen} onClose={onClose} onSubmit={ handleSubmit }>\n      <input ref={avatarRef} className=\"popup-form__information popup-form__information_input_avatar-link\"\n        placeholder=\"Ссылка на фото\" name=\"avatar\" type=\"url\" required />\n      <span className=\"popup__error-message\"></span>\n    </PopupWithForm>\n  )\n};\n\nexport default EditAvatarPopup;","export class Api {\n    constructor(config) {\n        this._url = config.url;\n        this._headers = config.headers;\n    }\n\n    // обработка ответа от сервера\n    _getResponseData(res) {\n        if (res.ok) {\n            return res.json()\n        } else {\n            return Promise.reject(`Произошла ошибка ${res.status}`)\n        }\n    }\n\n\n    // Загрузить информацию о пользователе с сервера\n    getUserInfo() {\n        return fetch(`${this._url}/users/me`, {\n            method: 'GET',\n            headers: this._headers\n        })\n            .then(this._getResponseData)\n    }\n\n\n    // Загрузить карточки с сервера\n    getPlaceInfo() {\n        return fetch(`${this._url}/cards`, {\n            method: 'GET',\n            headers: this._headers\n        })\n            .then(this._getResponseData)\n    }\n\n\n    // Редактирование профиля \n    editProfileInfo(data) {\n        return fetch(`${this._url}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n            })\n        })\n            .then(this._getResponseData)\n    }\n\n\n    // Редактирование аватара\n    editAvatar(data) {\n        return fetch(`${this._url}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                avatar: data.avatar\n            })\n        })\n            .then(this._getResponseData)\n    }\n\n    // Добавление новой карточки\n    addNewCard(item) {\n        return fetch(`${this._url}/cards`, {\n            method: 'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: item.name,\n                link: item.link\n            })\n        })\n            .then(this._getResponseData)\n    }\n\n     // Удалние карточки\n    deleteCard(_id) {\n        return fetch(`${this._url}/cards/${_id}`, {\n            method: 'DELETE',\n            headers: this._headers,\n        })\n            .then(this._getResponseData)\n    }\n\n    // постановка лайка\n    changeLikeStatus(_id, isLiked) {\n        return fetch(`${this._url}/cards/likes/${_id}`, {\n            method: isLiked ? 'PUT' : 'DELETE',\n            headers: this._headers\n        })\n            .then(this._getResponseData)\n    }\n\n}\n\nconst api = new Api({\n    url: 'http://api.mesto.soffeine.nomoredomains.rocks',\n    headers: {\n      authorization: \"7f564866-b8ba-4557-8c91-b7d4f8327f3b\",\n      \"Content-Type\": \"application/json\"\n    }\n  });\n\n  export default api;","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n    return (\n        <Route>\n            {() =>\n                props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n            }\n        </Route>\n    );\n};\n\nexport default ProtectedRoute;","function InfoTooltip ({data, isOpen, onClose}) {\n    return (\n    <div className={isOpen ? `popup popup_opened ` : `popup`}>\n        <div className=\"popup__container\">\n            <button type=\"button\" className=\"popup__close-button popup-edit__close-button\" onClick={onClose}></button>\n            <img className=\"popup__image\" src={data.image} alt=\"результат регистрации\" />\n            <p className=\"popup__text\">{data.text}</p>\n        </div>\n    </div>\n    )\n}\n\nexport default InfoTooltip;\n    ","export const BASE_URL = 'http://api.mesto.soffeine.nomoredomains.rocks';\n\nconst getResponseData = (res) => {\n    return res.ok ? res.json() : Promise.reject(res.status);\n}\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ password, email })\n    })\n        .then(getResponseData)\n        .then(({data}) => {\n            console.log(data)\n            localStorage.setItem('email', data.email);\n        });\n};\n\n\nexport const authorize = (password, email) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ password, email })\n    })\n        .then(getResponseData)\n        .then((data) => {\n            localStorage.setItem('jwt', data.token);\n        })\n\n}\n\nexport const getContent = (jwt) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": `Bearer ${jwt}`\n        }\n    })\n        .then(getResponseData)\n        .then(data => data)\n}","export default __webpack_public_path__ + \"static/media/onRegisterError.064903fa.svg\";","export default __webpack_public_path__ + \"static/media/onRegisterSuccess.bd528945.svg\";","import Main from '../Main/Main.js';\nimport Footer from '../Footer/Footer';\nimport Register from '../Register/Register';\nimport Login from '../Login/Login';\nimport { useState, useEffect } from 'react';\nimport ImagePopup from '../ImagePopup/ImagePopup';\nimport EditProfilePopup from '../EditProfilePopup/EditProfilePopup';\nimport AddPlacePopup from '../AddPlacePopup/AddPlacePopup';\nimport EditAvatarPopup from '../EditAvatarPopup/EditAvatarPopup';\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\nimport api from '../../utils/api';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute.js';\nimport InfoTooltip from '../InfoTooltip/InfoTooltip.js';\nimport * as auth from '../../utils/auth';\nimport errorImage from '../../images/onRegisterError.svg';\nimport successImage from '../../images/onRegisterSuccess.svg'\n\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddplacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsAvatarPopupOpen] = useState(false);\n  const [imagePopupData, setImagePopupData] = useState({ isImagePopupOpen: false, selectedCard: \"\" });\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const history = useHistory();\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [successStatus, setSuccessStatus] = useState({});\n  const [email, setEmail] = useState('')\n  const registerErrorMessage = {\n    image: errorImage,\n    text: 'Что-то пошло не так! Попробуйте ещё раз.'\n  }\n  const registerSuccessMessage = {\n    image: successImage,\n    text: 'Вы успешно зарегистрировались!'\n  }\n\n  //регистрация нового пользователя\n  function onRegister(password, email) {\n    auth.register(password, email)\n      .then(() => {\n          handleSubmitMessage(registerSuccessMessage);\n          history.push('/sign-in')\n      })\n      .catch((err) => {\n        handleSubmitMessage(registerErrorMessage);\n        console.log(err);\n      })\n  }\n\n  //показ попапа\n  function handleSubmitMessage(data) {\n    setIsSuccess(true);\n    setSuccessStatus(data);\n  }\n\n  // авторизация пользователя\n  function onLogin(password, email) {\n    return auth.authorize(password, email)\n      .then(() => {\n          setLoggedIn(true);\n          history.push('/');\n      })\n      .catch(() => {\n        handleSubmitMessage(registerErrorMessage);\n      })\n  }\n\n  //выход из аккаунта \n  function handleSignOut () {\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n  };\n\n  //функция закрытия всех попапов\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAvatarPopupOpen(false);\n    setIsAddplacePopupOpen(false);\n    setImagePopupData((prev) => {\n      return {\n        ...prev,\n        isImagePopupOpen: false\n      }\n    })\n    setIsSuccess(false);\n  }\n\n  //функции открытия попапов\n  const handleEditAvatarClick = () => { setIsAvatarPopupOpen(true) }\n  const handleEditProfileClick = () => { setIsEditProfilePopupOpen(true) }\n  const handleAddPlaceClick = () => { setIsAddplacePopupOpen(true) }\n\n  const mestoAuth = (jwt) => {\n    return auth.getContent(jwt)\n    .then(({data}) => {\n        setLoggedIn(true);\n        setEmail(data.email);\n    })\n    .catch((err) => {console.log(err)})\n  };\n\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if(jwt) {\n      mestoAuth(jwt);\n    }\n  }, [loggedIn])\n\n  useEffect(() => {\n    if (loggedIn) history.push('/');\n  }, [loggedIn, history]);\n\n  //получения данных профиля и данных карточки с сервера\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getPlaceInfo()])\n      .then(([userRes, cardRes]) => {\n          setCurrentUser(userRes);\n          setCards(cardRes);\n      })\n      .catch(err => console.log(`Упс, ошибочка ${err}`));\n  }, [])\n\n\n  //работа с карточками\n  //лайк карточки\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  //удаление карточки\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(() => cards.filter((c) => c._id !== card._id))\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  //открытие полного изображения\n  function handleCardClick(card) {\n    setImagePopupData((prev) => {\n      return {\n        ...prev,\n        isImagePopupOpen: true,\n        selectedCard: card\n      }\n    })\n  }\n\n  //добавление новой карточки\n  function handleAddPlaceSubmit(newCard) {\n    api.addNewCard(newCard)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  //функция редактирования профиля\n  function handleUpdateUser(data) {\n    api.editProfileInfo(data)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  //функция изменения аватара\n  function handleUpdateAvatar(data) {\n    api.editAvatar(data)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Switch>\n\n          <ProtectedRoute exact path=\"/\"\n            loggedIn={loggedIn}\n            component={Main}\n            onEditProfileClick={handleEditProfileClick}\n            onAddPlaceClick={handleAddPlaceClick}\n            onAvatarClick={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete} \n            userEmail={email}\n            onSignOut={handleSignOut}/>\n\n          <Route path='/sign-up'>\n            <Register onRegister={onRegister} />\n          </Route>\n\n          <Route path='/sign-in'>\n            <Login onLogin={onLogin} />\n          </Route>\n\n        </Switch>\n\n        <Footer />\n\n        <EditProfilePopup isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser} />\n\n        <AddPlacePopup isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit} />\n\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar} />\n\n        <ImagePopup card={imagePopupData.selectedCard}\n          isOpened={imagePopupData.isImagePopupOpen}\n          popupName={\"image\"}\n          onClose={closeAllPopups} />\n\n        <InfoTooltip data={successStatus}\n          isOpen={isSuccess}\n          onClose={closeAllPopups} />\n\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App.js';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}